{{ define "main" }}
<!-- PSINGLE -->
<div class="container mt-3 mt-md-5">
    <div class="row">
        <div class="col">
            {{ .Content }}
        </div>
    </div>

    {{ $current := . }}
    {{ with .Resources.GetMatch "before-after.{md,html}" }}
        <div class="row">
            <div class="col">

                <style>
                div.bacontainer {
                    width: 800px;
                    height: 530px;
                    position: relative;
                }
                div.image {
                    height: 100%;
                    background-repeat: no-repeat;
                    background-position: top left;
                    background-size: cover;
                    position: absolute;
                    top: 0px;
                    left: 0px;
                }
                div.before {
                    width: 50%;
                    {{ $before := $current.Resources.GetMatch "before.{webp,jpg,png}" }}
                    background-image: url("{{ $before.RelPermalink }}");
                    z-index: 2;
                }

                div.after {
                    width: 100%;
                    {{ $after := $current.Resources.GetMatch "after.{webp,jpg,png}" }}
                    background-image: url("{{ $after.RelPermalink }}");
                    z-index: 1;
                }
                input.slider {
                    width: 100%;
                    height: 100%;
                    outline: none;
                    background-color: transparent;
                    position: absolute;
                    margin: 0px;
                    z-index: 3;
                    cursor: pointer;
                    appearance: none;
                    -moz-appearance: none;
                    -webkit-appearance: none;
                    transition: 0.25s all ease-in-out;
                    -moz-transition: 0.25s all ease-in-out;
                    -webkit-transition: 0.25s all ease-in-out;
                    z-index: 4;
                }
                input.slider::-moz-range-thumb {
                    width: 6px;
                    height: 600px;
                    background-color: white;
                    cursor: pointer;
                }

                input.slider::-webkit-slider-thumb {
                    width: 6px;
                    height: 530px;
                    background-color: white;
                    cursor: pointer;
                    appearance: none;
                    -moz-appearance: none;
                    -webkit-appearance: none;
                }
                div.slider-button {
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    -moz-broder-radius: 50%;
                    -webkit-border-radius: 50%;
                    background-color: white;
                    position: absolute;
                    top: calc(50% - 18px);
                    left: calc(50% - 18px);
                    cursor: pointer;
                    z-index: 3;
                }

                div.slider-button:before {
                    color: #555;
                    position: absolute;
                    top: 3px;
                    left: 0px;
                    content: "\2B9C";
                }

                div.slider-button:after {
                    color: #555;
                    position: absolute;
                    top: 3px;
                    right: 0px;
                    content: "\2B9E";
                }
                </style>

                <div class="bacontainer">
                    <div class="image before"></div>
                    <div class="image after"></div>
                    <input type="range" class="slider" min="1" max="100" value="50"/>
                    <div class="slider-button"></div>
                </div>

                <script>
                // $("input.slider").on("input change", function(event) {
                //     var pos = event.target.value;
                //
                //     $("div.before").css({width: pos + "%"});
                //     $("div.slider-button").css({left: "calc(" + pos + "% - 18px)"});
                // });
                //

                window.addEventListener('load', (event) => {
                    let element = document.querySelector("input.slider");
                    if (element) {
                        element.addEventListener('input', (evt) => {
                           console.log("input");
                           let pos = evt.target.value;
                           let before = document.querySelector("div.before");
                           let button = document.querySelector("div.slider-button");
                           if (before && button) {
                               before.setAttribute('style', "width: " + pos + "%;");
                               button.setAttribute('style', "left: calc(" + pos + "% - 18px");
                           }
                        });
                    }
                });


                </script>
            </div>
        </div>
    {{ end }}
</div>

{{ end }}
