{{ $cover := default ($.Param "cascade.cover.url") }}
{{ $cover_square := default ($.Param "cascade.cover.url1x1") | default $cover }}

{{/* Is there a local file "cover.*" (and if so a "cover-square.*")? */}}
{{ $current := . }}
{{ with .Resources.GetMatch "cover.{webp,jpg,png}" }}
    {{ $cover = .RelPermalink }}
    {{ $cover_square = $cover }}
    {{ with $current.Resources.GetMatch "cover-square.{webp,jpg,png" }}
        {{ $cover_square = .RelPermalink }}
    {{ end }}
{{ end }}


<style>
    {{ with $cover_square }}
        div.cover {
            background-image: url({{ . }});
        }
    {{ end }}
    {{ with $cover }}
        // Medium devices (tablets, 768px and up)
        @media (min-width: 768px) {
            div.cover {
                background-image: url({{ . }});
            }
        }
    {{ end }}
</style>

{{ $cover_content := $.Param "cascade.cover.content"  }}
<header>
    {{ if not ($.Param "cascade.cover.hidden") }}
    <div id="cover" class="cover position-relative
        {{- if $.Param "cascade.cover.heroic" }} heroic {{- end -}}
        {{- if $.Param "cascade.cover.thin" }} thin {{- end -}}">

        <div id="cover-content" class="cover-content position-absolute w-75 top-50 start-50 translate-middle text-white text-center">
            {{ $cover_content | safeHTML }}
        </div>
    </div>
    {{ end }}
</header>
